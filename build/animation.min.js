var animation=animation||new function(){};!function(t){t.util={},t.util.Flags={FROM:1,STATIC:2,CUSTOM_PROPERTY:4,REVERSE:8},t.util.extend=function(t,i,e){return t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.prototype["super"+e]=function(){i.apply(this,arguments)},t.prototype.super=i.prototype,t.prototype};var i=function(){};Object.defineProperties(i.prototype,{setRelative:{value:function(t){Object.defineProperty(this,"isRelative",{value:t,configurable:!0,enumerable:!0})}},copy:{value:function(t){for(var i in t)this[i]=t[i]}}}),t.util.Model=i,t.core={}}(animation),function(t){var i=function(){this._targets=[],this._registered=!1},e=i.prototype;e.registerStarter=function(t){this.startCallback=t},e.update=function(){for(var t=0;t<this._targets.length;t++)this._targets[t]._update()},e.add=function(t){~this._targets.indexOf(t)||(this._targets.push(t),this._registered||(this._registered=!0,this.startCallback(!0)))},e.remove=function(t){var i=this._targets.indexOf(t);~i&&(this._targets.splice(i,1),!this._targets.length&&this._registered&&(this._registered=!1,this.startCallback(!0)))},t.util.ticker=new i}(animation),function(t){var i=t.State={STOP:1,PLAY:2,PAUSE:3},e=1,n=function(){this.id=e++,this._flags=0,this._data={},this._data.from=new t.util.Model,this._data.to=new t.util.Model,this._current=new t.util.Model,this._setState(i.STOP)};t.core.Animation=n;var a=n.prototype;Object.defineProperties(a,{root:{get:function(){for(var t=this;t._parent;)t=t._parent;return t}},elapsed:{get:function(){return this._elapsed}},name:{get:function(){return this._name}}}),a._setState=function(t){Object.defineProperty(this,"state",{value:t,enumerable:!0,configurable:!0})},a._addTicker=function(){t.util.ticker.add(this)},a._removeTicker=function(){t.util.ticker.remove(this)},a._addFlag=function(t){this._flags|=t},a._delFlag=function(t){this._flags=this._flags&~t},a._setParent=function(t){return Object.defineProperty(this,"_parent",{value:t,configurable:!0}),this},a._calculate=function(e,n){if(e&&Object.assign(this._data.to,e._data.to),this._data.beginTime=n,this._data.repeatCount=0,this._elapsed=0,this._setState(i.STOP),this._flags&t.util.Flags.STATIC)this._data.duration=0;else if(this._duration)this._data.duration=this._duration;else for(var a=this._parent;!this._data.duration&&a;)this._data.duration=a._duration,a=a._parent;for(var r=this;!r._ease&&r._parent;)r=r._parent;return this._data.ease=r._ease,this},a._isReverse=function(){for(var i=this;!(i._flags&t.util.Flags.REVERSE)&&i._parent;)i=i._parent;return!!(i._flags&t.util.Flags.REVERSE)},a._update=function(){var t=performance.now()-this._startTime;this._isReverse()&&(t=this._data.duration-t),this._checkTime(t),1===this._state&&(this._removeTicker(),this._setState(i.STOP),this.dispatch("complete"))},a._checkTime=function(t){if(this._elapsed=t,this._elapsed<this._data.beginTime)this._state=-1;else{if(this._state=0,this._elapsed>this._data.duration+this._data.beginTime){if(!(this._loop&&this._loop>this._data.repeatCount))return this._state=1,this._elapsed=this._data.beginTime+this._data.duration*(this._data.repeatCount+1),void this.apply(this._elapsed,1,0);var i=this._elapsed-this._data.beginTime,e=Math.floor(i/this._data.duration);this._elapsed=this._data.beginTime+this._elapsed-e*this._data.duration,e!==this._data.repeatCount&&(this._data.repeatCount=e,this.dispatch("loop",{count:e}),this._data.repeatCount<this._loop&&this._reset())}var n=(this._elapsed-this._data.beginTime)/this._data.duration;this._modify(this._elapsed,n)}},a._modify=function(t,i){this._data.ease&&(i=this._data.ease(i,0,1,1));var e=0;this._fluctuation&&(e=this._fluctuation.amplitude*Math.abs(Math.sin(i*Math.PI*this._fluctuation.count)),this._fluctuation.fading&&(e*=1-i)),this.apply(t,i,e)},a._reset=function(){},a.apply=function(t,i){this._hasEvent("change")&&this.dispatch("change",{elapsed:t,percent:i})},a.setTarget=function(t){return Object.defineProperty(this,"_target",{value:t,configurable:!0}),this},a.duration=function(t){return Object.defineProperty(this,"_duration",{value:t,configurable:!0}),this},a.fluctuation=function(t,i,e){isNaN(t)&&(console.log("Fluctuation amplitude isNaN",t),t=0);var n={amplitude:t,count:i=i||1,fading:!!e};try{Object.freeze(n)}catch(t){}return Object.defineProperty(this,"_fluctuation",{value:n,configurable:!0}),this},a.loop=function(){var t=arguments.length>0?+arguments[0]:Number.MAX_VALUE;return isNaN(t)&&(console.error("Loop value isNaN: ",arguments[0]),t=Number.MAX_VALUE),Object.defineProperty(this,"_loop",{value:t,configurable:!0}),this},a.setName=function(t){return this._name=t,this},a.finish=function(){return this._calculate(null,0),this._finished=!0,this},a.play=function(){return this._finished||this.finish(),this._setState(i.PLAY),this._startTime=performance.now(),this._addTicker(),this._checkTime(0),this},a.gotoAndStop=function(t){return this._setState(i.STOP),this._startTime=performance.now(),this._checkTime(t),this},a.gotoAndPlay=function(t){return this._setState(i.PLAY),this._startTime=performance.now()-t,this._addTicker(),this._checkTime(t),this},a.pause=function(){if(this.state===i.PLAY)return this._setState(i.PAUSE),this._removeTicker(),this},a.resume=function(){if(this.state===i.PAUSE)return this._setState(i.PLAY),this._startTime=performance.now()-this._elapsed,this._addTicker(),this}}(animation),function(t){var e=animation.core.Animation.prototype;e._hasEvent=function(t,i,e){if(!this._events)return-1;var n=!this._events[t];if(!n)return-1;if(!i)return!0;for(var a,r=0;r<n.length;r++)if((a=n[r]).callback===i&&a.context===e)return r;return-1},e.on=function(t,i,e,n){return this._events||(this._events={}),this._hasEvent(t,i,e)>-1?this:(this._events[t]||(this._events[t]=[]),this._events[t].push({callback:i,context:e,args:n}),this)},e.dispatch=function(t,i){if(this._events&&this._events[t])for(var e,n=this._events[t],a=0;a<n.length;a++)(e=n[a]).args&&(i.args=e.args),e.callback.call(e.context,i,this)},e.off=function(t,e,n){return this._events?(this._hasEvent(t,e,n)>-1&&this._events[t].splice(i,1),this):this}}(),function(t){var i=function(){this.superAnimation()};t.core.Interval=i;var e=t.util.extend(i,t.core.Animation,"Animation");e._calculate=function(){e.super._calculate.apply(this,arguments)}}(animation),function(t){var i=function(t){this.superInterval(),this.duration(t)};t.core.Timeout=i;var e=t.util.extend(i,t.core.Interval,"Interval");e._calculate=function(){e.super._calculate.apply(this,arguments)},t.timeout=function(t){return new i(t)}}(animation),function(t){var i=function(i){if(this.superInterval(),i&&(this._keysList=i,this._keys={},i))for(var e=0;e<i.length;e++)this._keys[i[e]]=1;this._info={},this._info.from=new t.util.Model,this._info.from.setRelative(!0),this._info.to=new t.util.Model};t.core.Property=i;var e=t.util.extend(i,t.core.Interval,"Interval");e._calculate=function(i,n){if(e.super._calculate.apply(this,arguments),this._keysList)for(var a=0;a<this._keysList.length;a++){var r,s=this._keysList[a];r=i&&i._data.to.hasOwnProperty(s)?i._data.to[s]:this._flags&t.util.Flags.CUSTOM_PROPERTY?this._getTargetValue(s):this.root._target[s],this._info.from.isRelative?this._data.from[s]=r:this._data.from[s]=this._info.from[s],this._data.to[s]=this._info.to[s],this._info.to.isRelative&&(this._data.to[s]+=r)}return this},e._getTargetValue=function(t){console.log("_getTargetValue:override me, key="+t)},e._setTargetValue=function(t,i){console.log("_setTargetValue:override me, key="+t+", value="+i)},e.from=function(t){for(var i=0;i<t.length;i++)this._info.from[this._keysList[i]]=t[i];return this._info.from.setRelative(!1),this},e.to=function(t,i){for(var e=0;e<t.length;e++)this._info.to[this._keysList[e]]=t[e];return i&&this._info.to.setRelative(!0),this},e.apply=function(i,n,a){var r;if(this._keysList)for(var s=0;s<this._keysList.length;s++)r=this._keysList[s],this._current[r]=this._data.from[r]+n*(this._data.to[r]-this._data.from[r])+a,this._flags&t.util.Flags.CUSTOM_PROPERTY?this._setTargetValue(r,this._current[r]):this.root._target[r]=this._current[r];e.super.apply.apply(this,arguments)}}(animation),function(t){var i=function(){this.superAnimation(),this.duration(0),this._addFlag(t.util.Flags.STATIC)};t.core.Static=i;var e=t.util.extend(i,t.core.Animation,"Animation");e._calculate=function(){e.super._calculate.apply(this,arguments),this._data.progress=!1},e._reset=function(){this._data.progress=!1},e.duration=function(){e.super.duration.call(this,0)},e._checkTime=function(t){t<this._data.beginTime||t>=this._data.duration+this._data.beginTime&&!this._data.progress&&(this._data.progress=!0,this.apply(0,0))}}(animation),function(t){var i=function(t,i,e){this.superStatic(),this.func(t),this.context(i),this.args(e)};t.core.CallFunc=i;var e=t.util.extend(i,t.core.Static,"Static");e.func=function(t){return this._func=t,this},e.context=function(t){return this._context=t,this},e.args=function(t){return this._args=t,this},e.apply=function(){this._func&&this._func.apply(this._context,this._args),e.super.apply.apply(this,arguments)},t.callFunc=function(t,e,n){return new i(t,e,n)}}(animation),function(t){var i=function(i){this.superInterval(),this._addFlag(t.util.Flags.REVERSE),this._animation=i,this._animation._setParent(this)};t.core.Reverse=i;var e=t.util.extend(i,t.core.Interval,"Interval");e._calculate=function(){e.super._calculate.apply(this,arguments),this._animation._calculate.apply(this._animation,arguments),!this._data.duration&&this._animation._data.duration&&(this._data.duration=this._animation._data.duration)},e._reset=function(){e.super._reset.apply(this,arguments),this._animation._reset.apply(this._animation,arguments)},e._modify=function(t,i){this._animation._modify.call(this._animation,t,i)},t.reverse=function(t){return new i(t)}}(animation),function(t){var i=function(t){this.superProperty(t)};t.core.Custom=i,t.util.extend(i,t.core.Property,"Property"),t.customTo=function(t){var e=[],n=[];for(var a in t)e.push(a),n.push(t[a]);return new i(e).to(n)},t.customAdd=function(t){var e=[],n=[];for(var a in t)e.push(a),n.push(t[a]);return new i(e).to(n,!0)},t.alphaFromTo=function(t,e){var n=[],a=[];for(var r in t)n.push(r),a.push(t[r]);var s=[];for(var r in t)s.push(e[r]);return new i(n).from(a).to(s)}}(animation),function(t){function i(t,i,e,n){return t}function e(t,i,e,n){return e*(t/=n)*t*t*t*t+i}function n(t,i,e,n){return e*((t=t/n-1)*t*t*t*t+1)+i}function a(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t*t*t+i:e/2*((t-=2)*t*t*t*t+2)+i}function r(t,i,e,n){var a=1.70158;return e*(t/=n)*t*((a+1)*t-a)+i}function s(t,i,e,n){var a=1.70158;return e*((t=t/n-1)*t*((a+1)*t+a)+1)+i}function o(t,i,e,n){var a=1.70158;return(t/=n/2)<1?e/2*(t*t*((1+(a*=1.525))*t-a))+i:e/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+i}function u(t,i,e,n,a,r){if(a=a||0,r=r||0,0===t)return i;if(1==(t/=n))return i+e;r||(r=.3*n);var s;return!a||a<Math.abs(e)?(a=e,s=r/4):s=r/(2*Math.PI)*Math.asin(e/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r)+i}function h(t,i,e,n,a,r){if(a=a||0,r=r||0,0===t)return i;if(1==(t/=n))return i+e;r||(r=.3*n);var s;return!a||a<Math.abs(e)?(a=e,s=r/4):s=r/(2*Math.PI)*Math.asin(e/a),a*Math.pow(2,-10*t)*Math.sin((t*n-s)*(2*Math.PI)/r)+e+i}function c(t,i,e,n,a,r){if(a=a||0,r=r||0,0===t)return i;if(2==(t/=n/2))return i+e;r||(r=n*(.3*1.5));var s;return!a||a<Math.abs(e)?(a=e,s=r/4):s=r/(2*Math.PI)*Math.asin(e/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r)*-.5+i:a*Math.pow(2,-10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r)*.5+e+i}function _(t,i,e,n){return-e*(Math.sqrt(1-(t/=n)*t)-1)+i}function f(t,i,e,n){return e*Math.sqrt(1-(t=t/n-1)*t)+i}function p(t,i,e,n){return(t/=n/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+i:e/2*(Math.sqrt(1-(t-=2)*t)+1)+i}function l(t,i,e,n){return e*(t/=n)*t*t+i}function d(t,i,e,n){return e*((t=t/n-1)*t*t+1)+i}function m(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i}function v(t,i,e,n){return 0===t?i:e*Math.pow(2,10*(t/n-1))+i}function y(t,i,e,n){return t===n?i+e:e*(1-Math.pow(2,-10*t/n))+i}function g(t,i,e,n){return 0===t?i:t===n?i+e:(t/=n/2)<1?e/2*Math.pow(2,10*(t-1))+i:e/2*(2-Math.pow(2,-10*--t))+i}function A(t,i,e,n){return e*(t/=n)*t+i}function T(t,i,e,n){return-e*(t/=n)*(t-2)+i}function M(t,i,e,n){return(t/=n/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i}function P(t,i,e,n){return e*(t/=n)*t*t*t+i}function O(t,i,e,n){return-e*((t=t/n-1)*t*t*t-1)+i}function I(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t*t+i:-e/2*((t-=2)*t*t*t-2)+i}function b(t,i,e,n){return e*(t/=n)*t*t*t*t+i}function S(t,i,e,n){return e*((t=t/n-1)*t*t*t*t+1)+i}function k(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t*t*t+i:e/2*((t-=2)*t*t*t*t+2)+i}function w(t,i,e,n){return-e*Math.cos(t/n*(Math.PI/2))+e+i}function E(t,i,e,n){return e*Math.sin(t/n*(Math.PI/2))+i}function R(t,i,e,n){return-e/2*(Math.cos(Math.PI*t/n)-1)+i}function x(t,i,e,n){return e-C(n-t,0,e,n)}function C(t,i,e,n){return(t/=n)<1/2.75?e*(7.5625*t*t)+i:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i}function F(t,i,e,n){return t<n/2?.5*x(2*t,0,e,n)+i:.5*C(2*t-n,0,e,n)+.5*e+i}t.core.Animation.prototype.easeRegular=function(){return this._ease=i,this},t.core.Animation.prototype.easeStrongIn=function(){return this._ease=e,this},t.core.Animation.prototype.easeStrongOut=function(){return this._ease=n,this},t.core.Animation.prototype.easeStrongInOut=function(){return this._ease=a,this},t.core.Animation.prototype.easeBackIn=function(){return this._ease=r,this},t.core.Animation.prototype.easeBackOut=function(){return this._ease=s,this},t.core.Animation.prototype.easeBackInOut=function(){return this._ease=o,this},t.core.Animation.prototype.easeElasticIn=function(){return this._ease=u,this},t.core.Animation.prototype.easeElasticOut=function(){return this._ease=h,this},t.core.Animation.prototype.easeElasticInOut=function(){return this._ease=c,this},t.core.Animation.prototype.easeCircIn=function(){return this._ease=_,this},t.core.Animation.prototype.easeCircOut=function(){return this._ease=f,this},t.core.Animation.prototype.easeCircInOut=function(){return this._ease=p,this},t.core.Animation.prototype.easeCubicIn=function(){return this._ease=l,this},t.core.Animation.prototype.easeCubicOut=function(){return this._ease=d,this},t.core.Animation.prototype.easeCubicInOut=function(){return this._ease=m,this},t.core.Animation.prototype.easeExpIn=function(){return this._ease=v,this},t.core.Animation.prototype.easeExpOut=function(){return this._ease=y,this},t.core.Animation.prototype.easeExpInOut=function(){return this._ease=g,this},t.core.Animation.prototype.easeQuadIn=function(){return this._ease=A,this},t.core.Animation.prototype.easeQuadOut=function(){return this._ease=T,this},t.core.Animation.prototype.easeQuadInOut=function(){return this._ease=M,this},t.core.Animation.prototype.easeQuartIn=function(){return this._ease=P,this},t.core.Animation.prototype.easeQuartOut=function(){return this._ease=O,this},t.core.Animation.prototype.easeQuartInOut=function(){return this._ease=I,this},t.core.Animation.prototype.easeQuintIn=function(){return this._ease=b,this},t.core.Animation.prototype.easeQuintOut=function(){return this._ease=S,this},t.core.Animation.prototype.easeQuintInOut=function(){return this._ease=k,this},t.core.Animation.prototype.easeSinIn=function(){return this._ease=w,this},t.core.Animation.prototype.easeSinOut=function(){return this._ease=E,this},t.core.Animation.prototype.easeSinInOut=function(){return this._ease=R,this},t.core.Animation.prototype.easeBounceIn=function(){return this._ease=x,this},t.core.Animation.prototype.easeBounceOut=function(){return this._ease=C,this},t.core.Animation.prototype.easeBounceInOut=function(){return this._ease=F,this}}(animation),function(t){var i=function(t){this.superProperty(),this.list(t)};t.core.Group=i;var e=t.util.extend(i,t.core.Property,"Property");e._calculate=function(t,i){e.super._calculate.apply(this,arguments)},e.list=function(t){this._list=t;for(var i=0;i<this._list.length;i++)this._list[i]._setParent(this);return this},e._reset=function(){for(var t=0;t<this._list.length;t++)this._list[t]._reset()},e.apply=function(t){for(var i=0;i<this._list.length;i++)this._list[i]._checkTime.apply(this._list[i],arguments);e.super.apply.apply(this,arguments)}}(animation),function(t){var i=function(t){this.superGroup(t)};t.core.Sequence=i;var e=t.util.extend(i,t.core.Group,"Group");e._calculate=function(t,i){e.super._calculate.apply(this,arguments);for(var n,a=0,r=0;r<this._list.length;r++)(n=this._list[r])._calculate(t,i),a+=n._data.duration,this._data.to.copy(n._data.to),t=n,i+=n._data.duration;return this._data.duration=a,this},t.sequence=function(){for(var t=[],e=0;e<arguments.length;e++)Array.isArray(arguments[e])?t=t.concat(arguments[e]):t.push(arguments[e]);return new i(t)},e.duration=function(){return console.error("Для Sequence свойство duration не определено. Определяется как сумма его дочерних элементов"),this}}(animation),function(t){var i=function(t){this.superGroup(t)};t.core.Spawn=i;var e=t.util.extend(i,t.core.Group,"Group");e._calculate=function(t,i){e.super._calculate.apply(this,arguments);for(var n,a=0,r=0;r<this._list.length;r++)(n=this._list[r])._calculate(t,i),this._data.to.copy(n._data.to),a=Math.max(a,n._data.duration);return this._data.duration=this._duration||a,this},t.spawn=function(){for(var t=[],e=0;e<arguments.length;e++)Array.isArray(arguments[e])?t=t.concat(arguments[e]):t.push(arguments[e]);return new i(t)}}(animation);